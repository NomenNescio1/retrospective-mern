(this["webpackJsonpretro-app"]=this["webpackJsonpretro-app"]||[]).push([[0],{66:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var c,a,r,i,s,o,d,l,u=n(10),j=n.n(u),p=n(24),b=n(9),f=n.n(b),h=n(17),O=n(2),x=n(4),m=n(0),v=n(73),g=n(1),y=function(){return Object(g.jsxs)("header",{className:"top col-8 center",children:[Object(g.jsx)("h1",{children:"Retrospective App v2"}),Object(g.jsx)("h3",{children:"This is a scrum retrospective app built using the MERN stack."}),Object(g.jsxs)("p",{children:["Right now, the user can create cards, edit them, delete them and like them. I've also implemented drag and drop using ",Object(g.jsx)("a",{rel:"noreferrer",href:"https://github.com/atlassian/react-beautiful-dnd",target:"_blank",children:"react-beautiful-dnd."})," "]}),Object(g.jsx)("br",{}),Object(g.jsx)("p",{children:"These are the issues I'm working on:"}),Object(g.jsxs)("ul",{children:[Object(g.jsx)("li",{children:"After creating or deleting a card, the drag and drop fails."}),Object(g.jsx)("li",{children:"Dragged items won't get updated in the database records."}),Object(g.jsx)("li",{children:"A custom hook for fetching would be nice to have."})]})]})},w=n(27),k="https://guarded-spire-19484.herokuapp.com",C=Object(m.createContext)({state:!1,message:"",setError:function(e){e.state,e.message}}),N=n(72),I=n(71),S=n(74),T=n(23),E=n(18),A=n(19),D=A.a.div(c||(c=Object(E.a)(["\n    display: flex;\n    gap: 20px;\n    margin: 20px;\n    @media (max-width: 768px) {\n        flex-direction: column;\n      }\n"]))),_=A.a.div(a||(a=Object(E.a)(["\n    flex: 1;\n    background-color: ",";\n    padding: 15px;\n    border-radius: 8px;\n"])),(function(e){return e.bgColor})),P=A.a.div(r||(r=Object(E.a)(["\n    margin-bottom: 10px;\n    background-color: rgb(244, 247, 248, .8);\n    padding: 10px; 0;\n    border-radius: 8px;"]))),J=A.a.div(i||(i=Object(E.a)(["\n    width: 100%;\n    display: flex;\n    padding: 10px;\n    justify-content: flex-end;\n    align-items: center;\n"]))),R=(A.a.div(s||(s=Object(E.a)(["\n    width: 20vw;\n    margin: 0 auto;\n    @media (max-width: 768px) {\n        width: 70vw;\n      }"]))),A.a.form(o||(o=Object(E.a)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    gap: 10px;\n"]))),A.a.div(d||(d=Object(E.a)(["\n    display: flex;\n    gap: 10px;\n"]))),A.a.div(l||(l=Object(E.a)(["\n    width: 100%;\n    background-color: rgb(244, 247, 248, .7);\n    padding: 10px 0;\n    font-size: 20px;\n    margin: 20px 0;\n    cursor: pointer;\n"])))),H=function(e){var t=e.likes,n=e.content,c=e._id,a=e.updateCards,r=e.index,i=e._colId,s=e.color,o=Object(m.useRef)(null),d=Object(m.useState)(n||""),l=Object(x.a)(d,2),u=l[0],j=l[1],p=Object(m.useState)(t),b=Object(x.a)(p,2),v=b[0],y=b[1],E=Object(m.useState)(!1),A=Object(x.a)(E,2),D=A[0],_=A[1],R=Object(m.useState)(!1),H=Object(x.a)(R,2),B=H[0],F=H[1],L=Object(m.useContext)(C).setError,M=function(){var e=Object(h.a)(f.a.mark((function e(t){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("".concat(k,"/editcard"),{method:"PATCH",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({colID:i,cardID:c,update:null===(n=o.current)||void 0===n?void 0:n.value})}).catch((function(e){console.error(e),L({state:!0,message:"Backend endpoint not available.",variant:"warning"})}));case 3:j(null===(a=o.current)||void 0===a?void 0:a.value),o.current.value="",_(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(h.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y((function(e){return e+1})),e.next=3,fetch("".concat(k,"/updatelikes"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({colID:n,cardID:t})}).catch((function(e){L({state:!0,message:"Endpoint not available."})}));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Y=function(){var e=Object(h.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(k,"/deletecard"),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({colID:n,cardID:t})}).catch((function(e){L({state:!0,message:"Endpoint not available."})}));case 2:a&&a(t);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)(N.a,{show:B,onHide:function(){return F(!1)},centered:!0,children:[Object(g.jsx)(N.a.Header,{closeButton:!0,children:Object(g.jsx)(N.a.Title,{children:"You are about to delete a card"})}),Object(g.jsx)(N.a.Body,{children:"Are you sure you want to continue?"}),Object(g.jsxs)(N.a.Footer,{children:[Object(g.jsx)(I.a,{variant:"secondary",onClick:function(){return F(!1)},children:"Nah"}),Object(g.jsx)(I.a,{variant:"primary",onClick:function(){return Y(c,i)},children:"Yes"})]})]}),Object(g.jsx)(T.b,{draggableId:c,index:r,children:function(e){return Object(g.jsxs)(P,Object(O.a)(Object(O.a)(Object(O.a)({ref:e.innerRef},e.dragHandleProps),e.draggableProps),{},{children:[u,Object(g.jsxs)(J,{children:[Object(g.jsx)(w.b,{fill:s,className:"icon edit-icon",onClick:function(){return _(!D)},id:"edit"}),Object(g.jsx)(w.c,{fill:s,onClick:function(){return F(!0)},className:"icon trash-icon"}),Object(g.jsx)(w.a,{fill:s,onClick:function(){return U(c,i)},className:"icon heart-icon"}),Object(g.jsx)("span",{style:{color:"black"},children:v})]}),Object(g.jsx)(S.a,{in:D,children:Object(g.jsx)("div",{children:Object(g.jsxs)("form",{className:"update-card-form",onSubmit:M,children:[Object(g.jsx)("input",{placeholder:"Edit card",className:"input-update",type:"text",name:"update",ref:o}),Object(g.jsx)("input",{type:"submit",value:"Update"})]})})})]}))}},c)]})},B=function(e){var t=e.name,n=e.color,c=(e.index,e._id),a=e.items,r=Object(m.useRef)(null),i=Object(m.useState)(t),s=Object(x.a)(i,2),o=s[0],d=s[1],l=Object(m.useState)(a),u=Object(x.a)(l,2),j=u[0],b=u[1],v=Object(m.useState)(!1),y=Object(x.a)(v,2),N=y[0],I=y[1],E=Object(m.useState)(!1),A=Object(x.a)(E,2),D=A[0],P=A[1],J=Object(m.useState)(""),B=Object(x.a)(J,2),F=B[0],L=B[1],M=Object(m.useContext)(C).setError,U=function(){var e=Object(h.a)(f.a.mark((function e(a){var r,i,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,fetch("".concat(k,"/createcard"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({content:F,colId:c,likes:0,color:n})});case 4:return r=e.sent,e.next=7,r.json();case 7:i=e.sent,s={_id:i._id,content:F,category:t,likes:0,color:n},b((function(e){return e?[].concat(Object(p.a)(e),[s]):[s]})),L(""),I(!1),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),console.error(e.t0),M({state:!0,message:"Can't fetch resource. Try again?"});case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(h.a)(f.a.mark((function e(t){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("".concat(k,"/editcol"),{method:"PATCH",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({colID:c,update:null===(n=r.current)||void 0===n?void 0:n.value})});case 3:d(null===(a=r.current)||void 0===a?void 0:a.value),r.current.value="",P(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(e){var t=j.filter((function(t){return t._id!==e}));b(t)};return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)(_,{bgColor:n,children:[Object(g.jsxs)("div",{className:"update-card-form",children:[Object(g.jsx)("h1",{className:"col-name",children:o}),Object(g.jsx)(w.b,{fill:"white",className:"icon edit-icon",onClick:function(){return P(!D)},id:"edit"})]}),Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(S.a,{in:D,children:Object(g.jsxs)("form",{onSubmit:Y,className:"update-card-form",children:[Object(g.jsx)("input",{ref:r,type:"text",name:"new-name"}),Object(g.jsx)("input",{placeholder:"New name",type:"submit",value:"Update"})]})})}),Object(g.jsx)(R,{onClick:function(e){return I(!N)},children:"Add card"}),Object(g.jsx)(S.a,{in:N,children:Object(g.jsx)("div",{children:Object(g.jsxs)("form",{onSubmit:U,className:"update-card-form",children:[Object(g.jsx)("input",{placeholder:"Card content",type:"text",className:"input-create",value:F||"",onChange:function(e){e.preventDefault(),L(e.target.value)},name:"content"}),Object(g.jsx)("input",{type:"submit",value:"Create"})]})})}),Object(g.jsx)(T.c,{droppableId:c,children:function(e){return Object(g.jsxs)("div",Object(O.a)(Object(O.a)({},e.droppableProps),{},{ref:e.innerRef,style:{marginTop:"10px"},children:[j.map((function(e,t){return Object(m.createElement)(H,Object(O.a)(Object(O.a)({},e),{},{key:e._id,_colId:c,index:t,updateCards:z}))})),e.placeholder]}))}},c)]})})},F=(n(66),n(67),function(){var e=Object(m.useState)([]),t=Object(x.a)(e,2),n=t[0],c=t[1],a=Object(m.useState)({state:!1,message:""}),r=Object(x.a)(a,2),i=r[0],s=r[1],o=Object(m.useMemo)((function(){return Object(O.a)(Object(O.a)({},i),{},{setError:s})}),[i]);Object(m.useEffect)((function(){var e=new AbortController,t=setTimeout((function(){return e.abort()}),8e3);function n(){return(n=Object(h.a)(f.a.mark((function t(){var n,a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(k,"/getcolumn/"),{signal:e.signal});case 3:return n=t.sent,t.next=6,n.json();case 6:a=t.sent,c(a),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),s({state:!0,message:"It seems the server is not responding. Try again?"});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))).apply(this,arguments)}clearTimeout(t),function(){n.apply(this,arguments)}()}),[]);return Object(g.jsx)(T.a,{onDragEnd:function(e){var t;if(e.destination){var a=e.source,r=e.destination,i=Object(p.a)(n),s=i.find((function(e){return e._id===a.droppableId})),o=i.find((function(e){return e._id===r.droppableId})),d=null===s||void 0===s||null===(t=s.items)||void 0===t?void 0:t.find((function(t){return t._id===e.draggableId}));if(e.destination&&d&&o&&s){var l,u,j,b;if(a.droppableId!==r.droppableId)d.color=o.color,null===(l=s.items)||void 0===l||l.splice(a.index,1),null===(u=o.items)||void 0===u||u.splice(r.index,0,d);else null===(j=s.items)||void 0===j||j.splice(a.index,1),null===(b=s.items)||void 0===b||b.splice(r.index,0,d);c(i)}}},children:Object(g.jsx)(C.Provider,{value:o,children:Object(g.jsxs)("div",{className:"App",children:[Object(g.jsx)(y,{}),i.state&&Object(g.jsxs)(v.a,{variant:i.variant||"danger",onClose:function(){return s({state:!1})},dismissible:!0,closeLabel:"close",closeVariant:"white",children:[Object(g.jsx)(v.a.Heading,{children:"There was an error with the app"}),Object(g.jsx)("p",{children:i.message})]}),Object(g.jsx)("div",{className:"container-fluid",children:Object(g.jsx)(D,{children:n&&n.map((function(e){return Object(m.createElement)(B,Object(O.a)(Object(O.a)({},e),{},{key:e._id}))}))})})]})})})});j.a.render(Object(g.jsx)(F,{}),document.getElementById("root"))}},[[69,1,2]]]);
//# sourceMappingURL=main.a43e1510.chunk.js.map