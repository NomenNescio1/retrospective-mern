(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{16:function(e,t,n){},17:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),a=n(10),c=n.n(a),s=(n(16),n(17),n(0)),i=function(){return Object(s.jsxs)("header",{className:"top col-12",children:[Object(s.jsx)("h1",{children:"Retrospective"}),Object(s.jsx)("h3",{children:"This is a scrum retrospective app built using the MERN stack. Due to costs constraints, it's using a single Mongo database that deletes all records after 2 hours. "}),Object(s.jsx)("p",{children:"To add a card of a retrospective, click on the '+' of the column, type the content and press Enter. You can also edit, delete and 'like' a card using the icons."})]})},d=n(3),l=n.n(d),p=n(11),u=n(4),h=n(5),m=n(6),f=n(8),j=n(7),b=n(2),v=function(e){Object(f.a)(n,e);var t=Object(j.a)(n);function n(e){var r;return Object(h.a)(this,n),(r=t.call(this,e)).updateField=o.a.createRef(),r.openEditForm=function(e){var t=!r.state.showInput;r.setState({showInput:t})},r.editCard=function(e,t){e.preventDefault(),fetch("https://guarded-spire-19484.herokuapp.com/edit/".concat(t),{method:"PATCH",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"update=".concat(r.updateField.current.value)}).then((function(){r.setState({cardContent:r.updateField.current.value}),r.updateField.current.value="",r.setState({showInput:!1})}))},r.fetchLikesCount=function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.state.likesCount+1,r.setState({likesCount:n}),e.prev=2,e.next=5,fetch("https://guarded-spire-19484.herokuapp.com/updatelikes/".concat(t),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({likes:r.state.likesCount})});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("Error",e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}(),r.deleteCard=function(e){fetch("https://guarded-spire-19484.herokuapp.com/deletecard/".concat(e),{method:"DELETE"}).then((function(){r.props.displayUpdatedCards(e)}))},r.state={showInput:!1,likesCount:0,cardContent:""},r}return Object(m.a)(n,[{key:"componentDidMount",value:function(){this.setState({likesCount:this.props.likes,cardContent:this.props.cardContent})}},{key:"render",value:function(){var e=this;return Object(s.jsxs)("div",{style:{backgroundColor:this.props.color},className:"card",children:[this.state.cardContent,Object(s.jsxs)("div",{className:"options-container",children:[Object(s.jsx)(b.b,{className:"icon edit-icon",color:"white",onClick:this.openEditForm,id:"edit"}),Object(s.jsx)(b.c,{onClick:function(t){e.deleteCard(e.props.id)},className:"icon trash-icon",color:"white"}),Object(s.jsx)(b.a,{onClick:function(){e.fetchLikesCount(e.props.id)},className:"icon heart-icon",color:"white"}),Object(s.jsx)("span",{style:{color:"white"},children:this.state.likesCount})]}),Object(s.jsx)("form",{onSubmit:function(t){return e.editCard(t,e.props.id)},children:Object(s.jsx)("input",{placeholder:"Editar tarjeta",style:{borderColor:this.props.color},className:"form-update ".concat(this.state.showInput?"d-block":"d-none"),type:"text",ref:this.updateField,name:"update"})})]})}}]),n}(o.a.Component),y=function(e){Object(f.a)(n,e);var t=Object(j.a)(n);function n(){var e;return Object(h.a)(this,n),(e=t.call(this)).contentRef=o.a.createRef(),e.categoryRef=o.a.createRef(),e.shouldDisplayForm=function(t){var n=!e.state.displayForm;e.setState({displayForm:n})},e.createCard=function(){var t=Object(u.a)(l.a.mark((function t(n){var r,o,a,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,t.next=4,fetch("https://guarded-spire-19484.herokuapp.com/createcard",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({content:e.contentRef.current.value,category:e.categoryRef.current.value,likes:0,color:e.props.color})});case 4:return r=t.sent,t.next=7,r.json();case 7:o=t.sent,a={_id:o._id,content:e.contentRef.current.value,category:e.categoryRef.current.value,likes:0,color:e.props.color},c=[].concat(Object(p.a)(e.state.items),[a]),e.setState({items:c,displayForm:!1}),e.contentRef.current.value="",t.next=17;break;case 14:t.prev=14,t.t0=t.catch(1),console.error("Error:",t.t0);case 17:case"end":return t.stop()}}),t,null,[[1,14]])})));return function(e){return t.apply(this,arguments)}}(),e.displayUpdatedCards=function(t){var n=e.state.items.filter((function(e){return e._id===t&&(e=null),e}));e.setState({items:n})},e.state={items:[],displayForm:!1},e}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=this;fetch("https://guarded-spire-19484.herokuapp.com/getcard/"+this.props.category).then((function(e){return e.json()})).then((function(t){e.setState({items:t})})).catch((function(e){return console.error(e)}))}},{key:"render",value:function(){var e=this;return Object(s.jsxs)("div",{className:"col-sm-4 action-container",children:[Object(s.jsx)("h2",{children:this.props.niceName}),Object(s.jsx)("div",{className:"add-card-span",onClick:this.shouldDisplayForm,children:"+"}),Object(s.jsxs)("form",{className:"form-create ".concat(this.state.displayForm?"d-block":"d-none"),onSubmit:this.createCard,children:[Object(s.jsx)("input",{placeholder:"Type the card content and press enter",type:"text",className:"input-create",style:{borderColor:this.props.color},ref:this.contentRef,name:"content"}),Object(s.jsx)("input",{type:"hidden",name:"category",ref:this.categoryRef,value:this.props.category})]}),Object(s.jsx)("div",{className:"cards-container",children:this.state.items.map((function(t){return Object(s.jsx)(v,{displayUpdatedCards:e.displayUpdatedCards,likes:t.likes,color:t.color,cardContent:t.content,id:t._id},t._id)}))})]})}}]),n}(o.a.Component);var k=function(){return Object(s.jsxs)("div",{className:"App",children:[Object(s.jsx)(i,{}),Object(s.jsx)("div",{className:"container-fluid",children:Object(s.jsxs)("div",{className:"row",children:[Object(s.jsx)(y,{color:"orchid",niceName:"Kudos",category:"kudos"}),Object(s.jsx)(y,{color:"salmon",niceName:"To Improve",category:"toImprove"}),Object(s.jsx)(y,{color:"aquamarine",niceName:"Went Well",category:"wentWell"})]})})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(s.jsx)(k,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[20,1,2]]]);
//# sourceMappingURL=main.1a3659c4.chunk.js.map